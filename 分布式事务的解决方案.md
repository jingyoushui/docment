### 分布式事务的解决方案

#### 1.什么是分布式事务

分布式事务是指事务的参与者、支持事务的服务器、资源服务器以及事务管理器分别位于不同的分布式系统的不同节点之上。

全局事务 X/OpenDTP事务模型（标准规范）

2PC协议（保证事务完整性，强一致性）：两阶段提交，但是可用性会降低。

![](/home/lixing/文档/image/选区_242.png)

三个角色：

- AP(应用程序)
- RM（资源管理器）
- TM（事务管理器，协调者）基于XA接口的实现

![](/home/lixing/文档/image/选区_241.png)

- TCC(Try/Commit/cancel):弱一致性模型->2pc改造实现->基于应用层实现

- 全局事务：全局事务 X/OpenDTP事务模型（标准规范）

- 基于可靠消息队列实现（Redis异步）

  ![](/home/lixing/文档/image/选区_243.png)

- 最大努力通知



#### 2.分布式事务下的CAP,BASE理论

CAP理论

- C:一致性
- A：可用性
- P:分区容错性

BASE理论：基本可用，最终一致性，软状态

酸碱平衡：ACID和BASE寻求平衡

> Atomikos分布式事务的解决方案（强一致性）

#### 3.分布式事务的解决方案

#### 4.代码实战